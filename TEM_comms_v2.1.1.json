{"version": "2.1.1", "topics": {"buffer.status": {"additionalProperties": false, "description": "This message contains information about the status of the tile upload buffer.", "properties": {"queue_length": {"description": "The number of tiles currently stored and waiting to be uploaded.", "title": "Queue Length", "type": "integer"}, "free_space": {"description": "The amount of free space on the tile storage disk in bytes.", "title": "Free Space", "type": "integer"}, "upload_rate": {"description": "The rate at which data is being uploaded in bits per second.", "title": "Upload Rate", "type": "integer"}}, "required": ["queue_length", "free_space", "upload_rate"], "title": "Status", "type": "object"}, "camera.command": {"additionalProperties": false, "description": "This message is used to instruct the camera to capture an image.", "properties": {"brightfield": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "default": false, "description": "If true, this tile should be used in creating the brightfield image.", "title": "Brightfield"}, "darkfield": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "default": false, "description": "If true, this tile should be used in creating the darkfield image.", "title": "Darkfield"}, "lens_correction": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "default": false, "description": "If true, this tile is part of a lens correction montage.", "title": "Lens Correction"}, "tile_id": {"description": "The tile ID", "examples": ["69005602-15b0-4407-bf5b-4bddd6629141"], "title": "Tile Id", "type": "string"}, "montage_id": {"description": "The montage ID. If a zero length string, the tile is for UI display or calibration purposes only.", "examples": ["4330c7cf-e45b-4950-89cf-82dc0f815fe9"], "title": "Montage Id", "type": "string"}, "row": {"description": "The row of the montage where the tile was captured.", "examples": [5], "title": "Row", "type": "integer"}, "column": {"description": "The column of the montage where the tile was captured.", "examples": [24], "title": "Column", "type": "integer"}, "overlap": {"description": "The number of pixels of overlap between tiles.", "examples": [512], "title": "Overlap", "type": "integer"}}, "required": ["tile_id", "montage_id", "row", "column", "overlap"], "title": "Command", "type": "object"}, "camera.image": {"additionalProperties": false, "description": "This message is sent after the camera exposure is complete.", "properties": {"tile_id": {"description": "The tile ID", "examples": ["69005602-15b0-4407-bf5b-4bddd6629141"], "title": "Tile Id", "type": "string"}, "montage_id": {"description": "The montage ID. If a zero length string, the tile is for UI display or calibration purposes only.", "examples": ["4330c7cf-e45b-4950-89cf-82dc0f815fe9"], "title": "Montage Id", "type": "string"}}, "required": ["tile_id", "montage_id"], "title": "Image", "type": "object"}, "camera.settings": {"additionalProperties": false, "description": "This message is used to change camera settings.", "properties": {"exposure": {"anyOf": [{"type": "number"}, {"type": "null"}], "default": null, "description": "The length of the camera exposure in microseconds.", "title": "Exposure"}, "gain": {"anyOf": [{"type": "number"}, {"type": "null"}], "default": null, "description": "The camera gain in decibels.", "title": "Gain"}, "width": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "description": "The width of the camera frame.", "title": "Width"}, "height": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "description": "The height of the camera frame.", "title": "Height"}}, "title": "Settings", "type": "object"}, "camera.status": {"additionalProperties": false, "description": "This message contains information about the state of the camera.", "properties": {"exposure": {"description": "The length of the camera exposure in microseconds.", "title": "Exposure", "type": "number"}, "gain": {"description": "The camera gain in decibels.", "title": "Gain", "type": "number"}, "width": {"description": "The camera frame width.", "title": "Width", "type": "integer"}, "height": {"description": "The camera frame height.", "title": "Height", "type": "integer"}, "temp": {"description": "The camera temperature.", "title": "Temp", "type": "number"}, "target_temp": {"description": "The target temperature of the camera cooling system.", "title": "Target Temp", "type": "number"}, "device_name": {"description": "The human readable device name.", "title": "Device Name", "type": "string"}, "device_model_id": {"description": "The device model identifier.", "title": "Device Model Id", "type": "string"}, "device_sn": {"description": "The camera serial number.", "title": "Device Sn", "type": "string"}, "bit_depth": {"anyOf": [{"type": "integer"}, {"type": "string"}], "description": "The bit depth of the camera sensor.", "title": "Bit Depth"}}, "required": ["exposure", "gain", "width", "height", "temp", "target_temp", "device_name", "device_model_id", "device_sn", "bit_depth"], "title": "Status", "type": "object"}, "scope.command": {"additionalProperties": false, "description": "This message is used to change microscope settings.", "properties": {"focus": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "description": "The desired focus value for the microscope, or None to keep the current value.", "title": "Focus"}, "mag_mode": {"anyOf": [{"enum": ["LM", "MAG1", "MAG2"], "type": "string"}, {"type": "null"}], "default": null, "description": "The desired magnification mode for the microscope, or None to keep the current value.", "title": "Mag Mode"}, "mag": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "description": "The desired magnification for the microscope, or None to keep the current value.", "title": "Mag"}, "brightness": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "description": "The desired beam spread for the microscope, or None to keep the current value.", "title": "Brightness"}, "beam_offset": {"anyOf": [{"maxItems": 2, "minItems": 2, "prefixItems": [{"type": "integer"}, {"type": "integer"}], "type": "array"}, {"type": "null"}], "default": null, "description": "The desired beam shift values, or None to keep the current value.", "title": "Beam Offset"}, "spot_size": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "description": "The desired spot size, or None to keep the current value.", "title": "Spot Size"}, "screen": {"anyOf": [{"enum": ["up", "down"], "type": "string"}, {"type": "null"}], "default": null, "description": "\"up\" to raise the microscope viewscreen, \"down\" to lower the microscope viewscreen, or None to keep the viewscreen in the current position.", "title": "Screen"}}, "title": "Command", "type": "object"}, "scope.status": {"additionalProperties": false, "description": "This message contains the state of the microscope.", "properties": {"focus": {"description": "The current focus value.", "title": "Focus", "type": "integer"}, "aperture": {"anyOf": [{"type": "string"}, {"type": "null"}], "description": "The current status of the objective aperture, or None if unknown.", "title": "Aperture"}, "mag_mode": {"description": "The curreng magnification mode.", "enum": ["MAG", "LOWMAG"], "title": "Mag Mode", "type": "string"}, "mag": {"description": "The current magnification.", "title": "Mag", "type": "integer"}, "tank_voltage": {"description": "The current voltage of the tank in kilo-volts.", "title": "Tank Voltage", "type": "integer"}, "brightness": {"description": "The current beam spread.", "title": "Brightness", "type": "integer"}, "beam_offset": {"description": "The current beam shift values.", "maxItems": 2, "minItems": 2, "prefixItems": [{"type": "integer"}, {"type": "integer"}], "title": "Beam Offset", "type": "array"}, "spot_size": {"description": "The current spot size.", "title": "Spot Size", "type": "integer"}, "screen": {"anyOf": [{"enum": ["up", "down"], "type": "string"}, {"type": "null"}], "description": "Whether the viewscreen is currently \"up\", \"down\", or None for an unknown position.", "title": "Screen"}}, "required": ["focus", "aperture", "mag_mode", "mag", "tank_voltage", "brightness", "beam_offset", "spot_size", "screen"], "title": "Status", "type": "object"}, "scope.image_shift.status": {"additionalProperties": false, "description": "This message conatins the status of the image shifting system.", "properties": {"enabled": {"description": "If the image shifting system is currently enabled.", "title": "Enabled", "type": "boolean"}, "current_position": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "description": "The current position index, or None if disabled.", "title": "Current Position"}, "image_shift": {"description": "The current image shift calibration values.", "maxItems": 2, "minItems": 2, "prefixItems": [{"type": "integer"}, {"type": "integer"}], "title": "Image Shift", "type": "array"}, "calibration": {"additionalProperties": {"maxItems": 2, "minItems": 2, "prefixItems": [{"type": "integer"}, {"type": "integer"}], "type": "array"}, "description": "The calibration values for each position index.", "title": "Calibration", "type": "object"}}, "required": ["enabled", "image_shift", "calibration"], "title": "Status", "type": "object"}, "scope.image_shift.command": {"additionalProperties": false, "description": "This message is used to enable and disable the image shifting system, and to switch to a predefined position.", "properties": {"enable": {"description": "Used to enable and disable the image shifting system.", "title": "Enable", "type": "boolean"}, "position": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "description": "The calibrated position index to use, or None if disabled.", "title": "Position"}}, "required": ["enable"], "title": "Command", "type": "object"}, "scope.image_shift.calibrate": {"additionalProperties": false, "description": "This message is used to calibrate the image shifting system.", "properties": {"position": {"description": "The image shift position index to calibrate.", "title": "Position", "type": "integer"}, "image_shift": {"description": "The new calibration values for this position index.", "maxItems": 2, "minItems": 2, "prefixItems": [{"type": "integer"}, {"type": "integer"}], "title": "Image Shift", "type": "array"}}, "required": ["position", "image_shift"], "title": "Calibrate", "type": "object"}, "stage.aperture.command": {"additionalProperties": true, "description": "This message is uesd to change between apertures on a substrate.", "properties": {"aperture_id": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "description": "The ID of the aperture to change to, or None to remain at the current aperture.", "title": "Aperture Id"}, "calibrate": {"default": false, "description": "Set to True to initiate aperture changing hardware calibration.", "title": "Calibrate", "type": "boolean"}}, "title": "Command", "type": "object"}, "stage.aperture.status": {"additionalProperties": true, "description": "This message includes status information about the aperture changing system.", "properties": {"current_aperture": {"anyOf": [{"type": "integer"}, {"type": "null"}], "description": "The ID of the current aperture, or None if unknown.", "title": "Current Aperture"}, "calibrated": {"description": "True if the aperture changing hardware is calibrated.", "title": "Calibrated", "type": "boolean"}, "error": {"default": "", "description": "An optional error message.", "title": "Error", "type": "string"}}, "required": ["current_aperture", "calibrated"], "title": "Status", "type": "object"}, "stage.motion.command": {"additionalProperties": true, "description": "This message is used to specify how the stage should move the sample.", "properties": {"x": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "description": "The desired absolute X position of the stage in nanometers, or None to keep the current position.", "title": "X"}, "y": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "description": "The desired absolute Y position of the stage in nanometers, or None to keep the current position.", "title": "Y"}, "z": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "description": "The desired absolute Z position of the stage in nanometers, or None to keep the current position.", "title": "Z"}, "calibrate": {"default": false, "description": "Set to True to initiate stage calibration.", "title": "Calibrate", "type": "boolean"}}, "title": "Command", "type": "object"}, "stage.motion.status": {"additionalProperties": true, "description": "This message includes stage motion status information.", "properties": {"x": {"anyOf": [{"type": "integer"}, {"type": "null"}], "description": "The current X position of the stage in nanometers, or None if unknown.", "title": "X"}, "y": {"anyOf": [{"type": "integer"}, {"type": "null"}], "description": "The current Y position of the stage in nanometers, or None if unknown.", "title": "Y"}, "z": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "description": "The current Z position of the stage in nanometers, or None if unknown.", "title": "Z"}, "in_motion": {"description": "This value is True if the stage is currently moving.", "title": "In Motion", "type": "boolean"}, "calibrated": {"description": "True if the stage is calibrated.", "title": "Calibrated", "type": "boolean"}, "error": {"default": "", "description": "An optional error message.", "title": "Error", "type": "string"}}, "required": ["x", "y", "in_motion", "calibrated"], "title": "Status", "type": "object"}, "stage.rotation.command": {"additionalProperties": false, "description": "This message is used to rotate the sample, and to calibrate this rotation.", "properties": {"angle_x": {"anyOf": [{"type": "number"}, {"type": "null"}], "default": null, "description": "The desired rotation angle around the X axis in radians, or None to keep the current value.", "title": "Angle X"}, "angle_y": {"anyOf": [{"type": "number"}, {"type": "null"}], "default": null, "description": "The desired rotation angle around the Y axis in radians, or None to keep the current value.", "title": "Angle Y"}, "eucentric_height": {"anyOf": [{"type": "number"}, {"type": "null"}], "default": null, "description": "The eucentric height of the stage in nanometers for calibration, or None to keep the current value.", "title": "Eucentric Height"}, "calibrate": {"default": false, "description": "If True, calibrate the sample rotation hardware.", "title": "Calibrate", "type": "boolean"}}, "title": "Command", "type": "object"}, "stage.rotation.status": {"additionalProperties": false, "description": "This message contains the status of the sample rotation system.", "properties": {"angle_x": {"description": "The current angle around the X axis in radians.", "title": "Angle X", "type": "number"}, "angle_y": {"description": "The current angle around the Y axis in radians.", "title": "Angle Y", "type": "number"}, "eucentric_height": {"description": "The current enucentric height value in nanometers.", "title": "Eucentric Height", "type": "number"}, "in_motion": {"description": "True if the rotation stage is currently moving.", "title": "In Motion", "type": "boolean"}, "error": {"default": "", "description": "An optional error message.", "title": "Error", "type": "string"}}, "required": ["angle_x", "angle_y", "eucentric_height", "in_motion"], "title": "Status", "type": "object"}, "tile.preview": {"additionalProperties": false, "description": "This message contains a downsampled tile image used for UI and calibration purposes.", "properties": {"tile_id": {"description": "The tile ID", "examples": ["69005602-15b0-4407-bf5b-4bddd6629141"], "title": "Tile Id", "type": "string"}, "montage_id": {"description": "The montage ID. If a zero length string, the tile is for UI display or calibration purposes only.", "examples": ["4330c7cf-e45b-4950-89cf-82dc0f815fe9"], "title": "Montage Id", "type": "string"}, "row": {"description": "The row of the montage where the tile was captured.", "examples": [5], "title": "Row", "type": "integer"}, "column": {"description": "The column of the montage where the tile was captured.", "examples": [24], "title": "Column", "type": "integer"}, "overlap": {"description": "The number of pixels of overlap between tiles.", "examples": [512], "title": "Overlap", "type": "integer"}, "image": {"description": "The downsampled tile as a base 64 encoded string.", "title": "Image", "type": "string"}}, "required": ["tile_id", "montage_id", "row", "column", "overlap", "image"], "title": "Preview", "type": "object"}, "tile.mini": {"additionalProperties": false, "description": "This message contains a highly downsampled tile image used in the creation of a minimap.", "properties": {"tile_id": {"description": "The tile ID", "examples": ["69005602-15b0-4407-bf5b-4bddd6629141"], "title": "Tile Id", "type": "string"}, "montage_id": {"description": "The montage ID. If a zero length string, the tile is for UI display or calibration purposes only.", "examples": ["4330c7cf-e45b-4950-89cf-82dc0f815fe9"], "title": "Montage Id", "type": "string"}, "row": {"description": "The row of the montage where the tile was captured.", "examples": [5], "title": "Row", "type": "integer"}, "column": {"description": "The column of the montage where the tile was captured.", "examples": [24], "title": "Column", "type": "integer"}, "overlap": {"description": "The number of pixels of overlap between tiles.", "examples": [512], "title": "Overlap", "type": "integer"}, "image": {"description": "The downsampled tile as a base 64 encoded string.", "title": "Image", "type": "string"}}, "required": ["tile_id", "montage_id", "row", "column", "overlap", "image"], "title": "Mini", "type": "object"}, "tile.processed": {"additionalProperties": false, "description": "This message contains the path to a fully processed tile stored on the filesystem.", "properties": {"tile_id": {"description": "The tile ID", "examples": ["69005602-15b0-4407-bf5b-4bddd6629141"], "title": "Tile Id", "type": "string"}, "montage_id": {"description": "The montage ID. If a zero length string, the tile is for UI display or calibration purposes only.", "examples": ["4330c7cf-e45b-4950-89cf-82dc0f815fe9"], "title": "Montage Id", "type": "string"}, "row": {"description": "The row of the montage where the tile was captured.", "examples": [5], "title": "Row", "type": "integer"}, "column": {"description": "The column of the montage where the tile was captured.", "examples": [24], "title": "Column", "type": "integer"}, "overlap": {"description": "The number of pixels of overlap between tiles.", "examples": [512], "title": "Overlap", "type": "integer"}, "path": {"description": "The path where the processed tile is stored.", "examples": ["/storage/processed/69005602-15b0-4407-bf5b-4bddd6629141.tiff"], "title": "Path", "type": "string"}}, "required": ["tile_id", "montage_id", "row", "column", "overlap", "path"], "title": "Processed", "type": "object"}, "tile.raw": {"additionalProperties": false, "description": "This message is sent whenever a new tile is stored on the filesystem and is ready for processing.", "properties": {"brightfield": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "default": false, "description": "If true, this tile should be used in creating the brightfield image.", "title": "Brightfield"}, "darkfield": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "default": false, "description": "If true, this tile should be used in creating the darkfield image.", "title": "Darkfield"}, "lens_correction": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "default": false, "description": "If true, this tile is part of a lens correction montage.", "title": "Lens Correction"}, "tile_id": {"description": "The tile ID", "examples": ["69005602-15b0-4407-bf5b-4bddd6629141"], "title": "Tile Id", "type": "string"}, "montage_id": {"description": "The montage ID. If a zero length string, the tile is for UI display or calibration purposes only.", "examples": ["4330c7cf-e45b-4950-89cf-82dc0f815fe9"], "title": "Montage Id", "type": "string"}, "row": {"description": "The row of the montage where the tile was captured.", "examples": [5], "title": "Row", "type": "integer"}, "column": {"description": "The column of the montage where the tile was captured.", "examples": [24], "title": "Column", "type": "integer"}, "overlap": {"description": "The number of pixels of overlap between tiles.", "examples": [512], "title": "Overlap", "type": "integer"}, "path": {"description": "The path where the raw tile is stored.", "examples": ["/storage/raw/69005602-15b0-4407-bf5b-4bddd6629141.tiff"], "title": "Path", "type": "string"}}, "required": ["tile_id", "montage_id", "row", "column", "overlap", "path"], "title": "Raw", "type": "object"}, "tile.statistics.focus": {"additionalProperties": false, "description": "This message contains the focus score, a measure of the quality of the focus of a given tile.", "properties": {"tile_id": {"description": "The tile ID", "examples": ["69005602-15b0-4407-bf5b-4bddd6629141"], "title": "Tile Id", "type": "string"}, "montage_id": {"description": "The montage ID. If a zero length string, the tile is for UI display or calibration purposes only.", "examples": ["4330c7cf-e45b-4950-89cf-82dc0f815fe9"], "title": "Montage Id", "type": "string"}, "row": {"description": "The row of the montage where the tile was captured.", "examples": [5], "title": "Row", "type": "integer"}, "column": {"description": "The column of the montage where the tile was captured.", "examples": [24], "title": "Column", "type": "integer"}, "overlap": {"description": "The number of pixels of overlap between tiles.", "examples": [512], "title": "Overlap", "type": "integer"}, "focus": {"description": "The focus metric. Lower is better", "examples": [0.37], "maximum": 1, "minimum": 0, "title": "Focus", "type": "number"}}, "required": ["tile_id", "montage_id", "row", "column", "overlap", "focus"], "title": "Focus", "type": "object"}, "tile.statistics.histogram": {"additionalProperties": false, "description": "This message contains raw histogram data for a tile.", "properties": {"tile_id": {"description": "The tile ID", "examples": ["69005602-15b0-4407-bf5b-4bddd6629141"], "title": "Tile Id", "type": "string"}, "montage_id": {"description": "The montage ID. If a zero length string, the tile is for UI display or calibration purposes only.", "examples": ["4330c7cf-e45b-4950-89cf-82dc0f815fe9"], "title": "Montage Id", "type": "string"}, "row": {"description": "The row of the montage where the tile was captured.", "examples": [5], "title": "Row", "type": "integer"}, "column": {"description": "The column of the montage where the tile was captured.", "examples": [24], "title": "Column", "type": "integer"}, "overlap": {"description": "The number of pixels of overlap between tiles.", "examples": [512], "title": "Overlap", "type": "integer"}, "hist": {"description": "The raw histogram data.", "items": {"type": "integer"}, "title": "Hist", "type": "array"}}, "required": ["tile_id", "montage_id", "row", "column", "overlap", "hist"], "title": "Histogram", "type": "object"}, "tile.statistics.min_max_mean": {"additionalProperties": false, "description": "This message contains simple statistics about a processed tile.", "properties": {"tile_id": {"description": "The tile ID", "examples": ["69005602-15b0-4407-bf5b-4bddd6629141"], "title": "Tile Id", "type": "string"}, "montage_id": {"description": "The montage ID. If a zero length string, the tile is for UI display or calibration purposes only.", "examples": ["4330c7cf-e45b-4950-89cf-82dc0f815fe9"], "title": "Montage Id", "type": "string"}, "row": {"description": "The row of the montage where the tile was captured.", "examples": [5], "title": "Row", "type": "integer"}, "column": {"description": "The column of the montage where the tile was captured.", "examples": [24], "title": "Column", "type": "integer"}, "overlap": {"description": "The number of pixels of overlap between tiles.", "examples": [512], "title": "Overlap", "type": "integer"}, "min": {"description": "The minimum pixel value.", "examples": [5], "title": "Min", "type": "integer"}, "max": {"description": "The maximum pixel value.", "examples": [249], "title": "Max", "type": "integer"}, "mean": {"description": "The mean pixel value.", "examples": [187], "title": "Mean", "type": "integer"}, "std": {"description": "The standard deviation of the pixel values.", "examples": [25], "title": "Std", "type": "integer"}}, "required": ["tile_id", "montage_id", "row", "column", "overlap", "min", "max", "mean", "std"], "title": "MinMaxMean", "type": "object"}, "tile.matches": {"$defs": {"Match": {"additionalProperties": false, "properties": {"row": {"description": "The row of the neighboring tile.", "title": "Row", "type": "integer"}, "column": {"description": "The column of the neighboring tile.", "title": "Column", "type": "integer"}, "dX": {"description": "The X axis offset of the tile in pixels to get the tile to match.", "title": "Dx", "type": "number"}, "dY": {"description": "The Y axis offset of the tile in pixels to get the tile to match.", "title": "Dy", "type": "number"}, "dXsd": {"description": "The X axis offset standard deviation of all the feature matches.", "title": "Dxsd", "type": "number"}, "dYsd": {"description": "The Y axis offset standard deviation of all the feature matches.", "title": "Dysd", "type": "number"}, "distance": {"description": "The euclidian offset distance in pixels.", "title": "Distance", "type": "number"}, "rotation": {"description": "The tile rotation in radians necessary to get the tiles to match.", "title": "Rotation", "type": "number"}, "position": {"description": "The position of matched tile relative to the captured tile.", "enum": ["top", "bottom", "left", "right"], "title": "Position", "type": "string"}, "pX": {"description": "The captured tile feature X positions.", "items": {"type": "number"}, "title": "Px", "type": "array"}, "pY": {"description": "The captured tile feature Y positions.", "items": {"type": "number"}, "title": "Py", "type": "array"}, "qX": {"description": "The matched tile feature X positions.", "items": {"type": "number"}, "title": "Qx", "type": "array"}, "qY": {"description": "The matched tile feature Y positions.", "items": {"type": "number"}, "title": "Qy", "type": "array"}}, "required": ["row", "column", "dX", "dY", "dXsd", "dYsd", "distance", "rotation", "position", "pX", "pY", "qX", "qY"], "title": "Match", "type": "object"}}, "additionalProperties": false, "description": "This message contains data relating to the matching of neighboring tiles.", "properties": {"tile_id": {"description": "The tile ID", "examples": ["69005602-15b0-4407-bf5b-4bddd6629141"], "title": "Tile Id", "type": "string"}, "montage_id": {"description": "The montage ID. If a zero length string, the tile is for UI display or calibration purposes only.", "examples": ["4330c7cf-e45b-4950-89cf-82dc0f815fe9"], "title": "Montage Id", "type": "string"}, "row": {"description": "The row of the montage where the tile was captured.", "examples": [5], "title": "Row", "type": "integer"}, "column": {"description": "The column of the montage where the tile was captured.", "examples": [24], "title": "Column", "type": "integer"}, "overlap": {"description": "The number of pixels of overlap between tiles.", "examples": [512], "title": "Overlap", "type": "integer"}, "matches": {"description": "Information about how the captured tile matches to each of its available neighbors.", "items": {"$ref": "#/$defs/Match"}, "title": "Matches", "type": "array"}}, "required": ["tile_id", "montage_id", "row", "column", "overlap", "matches"], "title": "Matches", "type": "object"}, "tile.template_matches": {"$defs": {"TemplateMatch": {"additionalProperties": false, "properties": {"offset": {"description": "The offset between the expected and actual template positions.", "maxItems": 2, "minItems": 2, "prefixItems": [{"type": "number"}, {"type": "number"}], "title": "Offset", "type": "array"}, "distance": {"description": "The distance of the offset.", "title": "Distance", "type": "number"}, "rotation": {"description": "The angle of the offset.", "title": "Rotation", "type": "number"}, "maxVal": {"description": "The maximum value of the template match.", "title": "Maxval", "type": "number"}, "minVal": {"description": "The minimum value of the template match.", "title": "Minval", "type": "number"}, "expected_offset_in_crop": {"description": "", "maxItems": 2, "minItems": 2, "prefixItems": [{"type": "integer"}, {"type": "integer"}], "title": "Expected Offset In Crop", "type": "array"}, "maxLoc": {"description": "The maximum location of the template match.", "maxItems": 2, "minItems": 2, "prefixItems": [{"type": "integer"}, {"type": "integer"}], "title": "Maxloc", "type": "array"}, "matched_pos_img2": {"description": "The template top left corner absolute location.", "maxItems": 2, "minItems": 2, "prefixItems": [{"type": "integer"}, {"type": "integer"}], "title": "Matched Pos Img2", "type": "array"}, "matched_center_img2": {"description": "The template center absolute location.", "maxItems": 2, "minItems": 2, "prefixItems": [{"type": "integer"}, {"type": "integer"}], "title": "Matched Center Img2", "type": "array"}, "good": {"description": "True if the match is good.", "title": "Good", "type": "boolean"}, "reject_reason": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": "", "description": "The reason why the match is not good.", "title": "Reject Reason"}}, "required": ["offset", "distance", "rotation", "maxVal", "minVal", "expected_offset_in_crop", "maxLoc", "matched_pos_img2", "matched_center_img2", "good"], "title": "TemplateMatch", "type": "object"}, "TemplateMatchContainer": {"additionalProperties": false, "properties": {"row": {"description": "The row of the neighboring tile.", "title": "Row", "type": "integer"}, "column": {"description": "The column of the neighboring tile.", "title": "Column", "type": "integer"}, "position": {"description": "The position of matched tile relative to the captured tile.", "enum": ["top", "bottom", "left", "right"], "title": "Position", "type": "string"}, "matches": {"description": "A list of data structures containing the information about each individual match.", "items": {"$ref": "#/$defs/TemplateMatch"}, "title": "Matches", "type": "array"}}, "required": ["row", "column", "position", "matches"], "title": "TemplateMatchContainer", "type": "object"}}, "additionalProperties": false, "description": "This message contains data reltaing to template matches used for calculating the lens correction transform.", "properties": {"tile_id": {"description": "The tile ID", "examples": ["69005602-15b0-4407-bf5b-4bddd6629141"], "title": "Tile Id", "type": "string"}, "montage_id": {"description": "The montage ID. If a zero length string, the tile is for UI display or calibration purposes only.", "examples": ["4330c7cf-e45b-4950-89cf-82dc0f815fe9"], "title": "Montage Id", "type": "string"}, "row": {"description": "The row of the montage where the tile was captured.", "examples": [5], "title": "Row", "type": "integer"}, "column": {"description": "The column of the montage where the tile was captured.", "examples": [24], "title": "Column", "type": "integer"}, "overlap": {"description": "The number of pixels of overlap between tiles.", "examples": [512], "title": "Overlap", "type": "integer"}, "matches": {"description": "Information about how the captured tile matches to each of its available neighbors.", "items": {"$ref": "#/$defs/TemplateMatchContainer"}, "title": "Matches", "type": "array"}}, "required": ["tile_id", "montage_id", "row", "column", "overlap", "matches"], "title": "TemplateMatches", "type": "object"}, "ui.edit": {"additionalProperties": false, "description": "This message is used to edit existing ROIs in the ROI queue.", "properties": {"roi_id": {"description": "The ROI id to edit.", "title": "Roi Id", "type": "string"}, "roi_pos_x": {"description": "The new X position of the ROI in nanometers.", "title": "Roi Pos X", "type": "integer"}, "roi_pox_y": {"description": "The new Y position of the ROI in nanometers.", "title": "Roi Pox Y", "type": "integer"}, "roi_width": {"description": "The new width of the ROI in nanometers.", "title": "Roi Width", "type": "integer"}, "roi_height": {"description": "The new height of the ROI in nanometers.", "title": "Roi Height", "type": "integer"}, "roi_angle": {"description": "The new angle to rotate the ROI in radians.", "title": "Roi Angle", "type": "number"}}, "required": ["roi_id", "roi_pos_x", "roi_pox_y", "roi_width", "roi_height", "roi_angle"], "title": "Edit", "type": "object"}, "ui.run": {"additionalProperties": false, "description": "This message is used start and stop automated image acquisition.", "properties": {"montage": {"default": false, "description": "Begin collecting montages according to the ROI queue.", "title": "Montage", "type": "boolean"}, "abort_now": {"default": false, "description": "Stop imaging immediately.", "title": "Abort Now", "type": "boolean"}, "abort_at_end": {"default": false, "description": "Stop imaging after the current montage is complete.", "title": "Abort At End", "type": "boolean"}, "resume": {"default": false, "description": "Resume from a failure state.", "title": "Resume", "type": "boolean"}, "cancel": {"default": false, "description": "Return to preview mode from a failure state.", "title": "Cancel", "type": "boolean"}}, "title": "Run", "type": "object"}, "ui.setup": {"additionalProperties": false, "description": "This message is utilized to setup a microscope in a semi-automated manner. Each of the fields in this message instructs the system to run an individual setup routine.", "properties": {"auto_focus": {"default": false, "description": "Automatically focus the microscope.", "title": "Auto Focus", "type": "boolean"}, "auto_exposure": {"default": false, "description": "Optimize the camera exposure.", "title": "Auto Exposure", "type": "boolean"}, "lens_correction": {"default": false, "description": "Collect and generate a lens correction.", "title": "Lens Correction", "type": "boolean"}, "acquire_brightfield": {"default": false, "description": "Acquire a darkfield image.", "title": "Acquire Brightfield", "type": "boolean"}, "acquire_darkfield": {"default": false, "description": "Acquire a brightfield image.", "title": "Acquire Darkfield", "type": "boolean"}, "center_beam": {"default": false, "description": "Center the beam in the image frame.", "title": "Center Beam", "type": "boolean"}, "spread_beam": {"default": false, "description": "Spread the beam.", "title": "Spread Beam", "type": "boolean"}, "find_aperture": {"default": false, "description": "Find and move to the aperture centroid.", "title": "Find Aperture", "type": "boolean"}, "calibrate_resolution": {"default": false, "description": "Calibrate the resolution of the microscope at the current mag level.", "title": "Calibrate Resolution", "type": "boolean"}, "grid": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "description": "Change to the specified grid.", "title": "Grid"}, "mag_mode": {"anyOf": [{"enum": ["LM", "MAG1", "MAG2"], "type": "string"}, {"type": "null"}], "default": null, "description": "Change to the specified mag mode. The \"mag\" field must also be specified.", "title": "Mag Mode"}, "mag": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "description": "Change to the specified magnification. \"mga_mode\" must also be specified.", "title": "Mag"}}, "title": "Setup", "type": "object"}, "montage.complete": {"$defs": {"Tile": {"additionalProperties": false, "properties": {"raster_index": {"description": "The index of the tile incremented for each subsequent tile in the montage.", "title": "Raster Index", "type": "integer"}, "stage_position": {"description": "The X-Y stage position of the tile in nanometers.", "maxItems": 2, "minItems": 2, "prefixItems": [{"type": "integer"}, {"type": "integer"}], "title": "Stage Position", "type": "array"}, "raster_position": {"description": "The X-Y indicies of the tile in the montage.", "maxItems": 2, "minItems": 2, "prefixItems": [{"type": "integer"}, {"type": "integer"}], "title": "Raster Position", "type": "array"}}, "required": ["raster_index", "stage_position", "raster_position"], "title": "Tile", "type": "object"}}, "additionalProperties": false, "description": "This message is sent after a montage is completed.", "properties": {"montage_id": {"description": "The unique montage ID.", "title": "Montage Id", "type": "string"}, "tiles": {"additionalProperties": {"$ref": "#/$defs/Tile"}, "description": "A mapping from tile IDs to tile metadata.", "title": "Tiles", "type": "object"}, "acquisition_id": {"description": "The corresponding TEMdb acqusition ID.", "title": "Acquisition Id", "type": "string"}, "start_time": {"description": "The timestamp when the montage was started.", "format": "date-time", "title": "Start Time", "type": "string"}, "pixel_size": {"description": "The average size ofee", "title": "Pixel Size", "type": "number"}, "rotation_angle": {"description": "The necessary tile rotation in radians to line up the right-handed image coordinate system with the Stage x-y coordinate system.", "title": "Rotation Angle", "type": "number"}, "aperture_centroid": {"description": "The X-Y coordinates of the centroid of the imaged aperture in nanometers.", "maxItems": 2, "minItems": 2, "prefixItems": [{"type": "integer"}, {"type": "integer"}], "title": "Aperture Centroid", "type": "array"}}, "required": ["montage_id", "tiles", "acquisition_id", "start_time", "pixel_size", "rotation_angle", "aperture_centroid"], "title": "Complete", "type": "object"}, "qc.status": {"additionalProperties": false, "description": "This message contains the overall QC status of the system.", "properties": {"status": {"description": "The QC status, \"GOOD\" if imaging should continue, \"STOP_AT_END\" if imaging should be stopped at the end of the current montage, and \"STOP_NOW\" if imaging should be stopped immediately.", "enum": ["GOOD", "STOP_AT_END", "STOP_NOW"], "title": "Status", "type": "string"}, "reason": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "description": "Optionally, a human readable reason for the current status.", "title": "Reason"}}, "required": ["status"], "title": "Status", "type": "object"}, "roi.load": {"additionalProperties": false, "description": "This message can be used to load an ROI from the database into the ROI queue.", "properties": {"specimen_id": {"description": "The specimen ID to load from the database.", "title": "Specimen Id", "type": "string"}, "section_id": {"description": "The section ID to load from the database.", "title": "Section Id", "type": "string"}, "grid_id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "description": "The the grid ID where the section is loaded.", "title": "Grid Id"}, "queue_position": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "description": "Position in queue, None means set as current", "title": "Queue Position"}}, "required": ["specimen_id", "section_id"], "title": "LoadROI", "type": "object"}, "roi.create": {"$defs": {"Vertex": {"additionalProperties": false, "properties": {"x": {"title": "X", "type": "number"}, "y": {"title": "Y", "type": "number"}}, "required": ["x", "y"], "title": "Vertex", "type": "object"}}, "additionalProperties": false, "description": "This message can be used to create an ROI and add it to the ROI queue.", "properties": {"vertices": {"description": "A list of points defining a polygonal ROI.", "items": {"$ref": "#/$defs/Vertex"}, "title": "Vertices", "type": "array"}, "rotation_angle": {"description": "The rotation angle of the ROI in radians.", "title": "Rotation Angle", "type": "number"}, "buffer_size": {"default": 0.0, "description": "The amount to dialate the ROI in nanometers when imaging.", "title": "Buffer Size", "type": "number"}, "montage_id": {"description": "The montage ID to use when imaging the ROI.", "title": "Montage Id", "type": "string"}, "specimen_id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "description": "The specimen ID corresponding to this ROI.", "title": "Specimen Id"}, "grid_id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "description": "The grid ID where this ROI should be imaged.", "title": "Grid Id"}, "section_id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "description": "The section ID corresponding to this ROI.", "title": "Section Id"}, "metadata": {"anyOf": [{"additionalProperties": true, "type": "object"}, {"type": "null"}], "default": null, "description": "Extra metadata about this ROI.", "title": "Metadata"}, "queue_position": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "description": "Position in queue, None means set as current", "title": "Queue Position"}, "center": {"anyOf": [{"$ref": "#/$defs/Vertex"}, {"type": "null"}], "default": null, "description": "The center point of the ROI."}, "tilt_angles": {"anyOf": [{"items": {"type": "number"}, "type": "array"}, {"type": "null"}], "default": [0.0], "description": "List of tilt angles in degrees for tomography series", "title": "Tilt Angles"}, "aperture_centroid_pixel": {"anyOf": [{"$ref": "#/$defs/Vertex"}, {"type": "null"}], "default": null, "description": "Aperture centroid in pixel coordinates"}, "aperture_centroid_physical": {"anyOf": [{"$ref": "#/$defs/Vertex"}, {"type": "null"}], "default": null, "description": "Aperture centroid in physical coordinates (nm)"}, "overview_nm_per_pixel": {"anyOf": [{"type": "number"}, {"type": "null"}], "default": null, "description": "Overview image scale in nm per pixel", "title": "Overview Nm Per Pixel"}}, "required": ["vertices", "rotation_angle", "montage_id"], "title": "CreateROI", "type": "object"}, "roi.current": {"$defs": {"Vertex": {"additionalProperties": false, "properties": {"x": {"title": "X", "type": "number"}, "y": {"title": "Y", "type": "number"}}, "required": ["x", "y"], "title": "Vertex", "type": "object"}}, "additionalProperties": false, "description": "Information about the current ROI being imaged.", "properties": {"vertices": {"description": "A list of points defining a polygonal ROI.", "items": {"$ref": "#/$defs/Vertex"}, "title": "Vertices", "type": "array"}, "rotation_angle": {"description": "The rotation angle of the ROI in radians.", "title": "Rotation Angle", "type": "number"}, "buffer_size": {"default": 0.0, "description": "The amount to dialate the ROI in nanometers when imaging.", "title": "Buffer Size", "type": "number"}, "montage_id": {"description": "The montage ID to use when imaging the ROI.", "title": "Montage Id", "type": "string"}, "specimen_id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "description": "The specimen ID corresponding to this ROI.", "title": "Specimen Id"}, "grid_id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "description": "The grid ID where this ROI should be imaged.", "title": "Grid Id"}, "section_id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "description": "The section ID corresponding to this ROI.", "title": "Section Id"}, "metadata": {"anyOf": [{"additionalProperties": true, "type": "object"}, {"type": "null"}], "default": null, "description": "Extra metadata about this ROI.", "title": "Metadata"}, "queue_position": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "description": "Position in queue, None means set as current", "title": "Queue Position"}}, "required": ["vertices", "rotation_angle", "montage_id"], "title": "ROI", "type": "object"}, "roi.status": {"additionalProperties": false, "description": "This message contains information on the status of an individual ROI.", "properties": {"type": {"description": "Event type: roi_added, roi_advanced, queue_cleared, queue_empty", "title": "Type", "type": "string"}, "timestamp": {"description": "Timestamp", "title": "Timestamp", "type": "integer"}, "roi_count": {"description": "Total number of active ROIs (queue + current)", "title": "Roi Count", "type": "integer"}, "has_active_rois": {"description": "Whether there are any ROIs available", "title": "Has Active Rois", "type": "boolean"}, "source": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "description": "Source of last ROI submission: UI or external", "title": "Source"}, "montage_id": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "description": "Current montage ID", "title": "Montage Id"}, "queue_info": {"anyOf": [{"additionalProperties": true, "type": "object"}, {"type": "null"}], "default": null, "description": "Queue statistics: total, completed, remaining", "title": "Queue Info"}}, "required": ["type", "timestamp", "roi_count", "has_active_rois"], "title": "ROIStatus", "type": "object"}, "montage.minimaps": {"$defs": {"Minimap": {"additionalProperties": false, "properties": {"image": {"anyOf": [{"type": "string"}, {"type": "null"}], "description": "The map as a base 64 encoded image.", "title": "Image"}, "colorbar": {"description": "The colorbar as a base 64 encoded image.", "title": "Colorbar", "type": "string"}, "min": {"anyOf": [{"type": "number"}, {"type": "null"}], "description": "The minimum value of the colorbar.", "title": "Min"}, "max": {"anyOf": [{"type": "number"}, {"type": "null"}], "description": "The maximum value of the colorbar.", "title": "Max"}}, "required": ["image", "colorbar", "min", "max"], "title": "Minimap", "type": "object"}}, "additionalProperties": false, "description": "This message contains multiple overview maps including a low resolution version of the montage, along with various statistics.", "properties": {"montage_id": {"description": "The unique montage ID.", "title": "Montage Id", "type": "string"}, "montage": {"$ref": "#/$defs/Minimap", "description": "The montage minimap."}, "focus": {"$ref": "#/$defs/Minimap", "description": "The focus score map."}}, "required": ["montage_id", "montage", "focus"], "title": "Minimaps", "type": "object"}, "calibration.resolution": {"$defs": {"_Resolution": {"additionalProperties": false, "properties": {"nm_per_px": {"description": "The X-Y size of each pixel in the processed camera image in nanometers.", "examples": [[3.97, 4.03]], "maxItems": 2, "minItems": 2, "prefixItems": [{"type": "number"}, {"type": "number"}], "title": "Nm Per Px", "type": "array"}, "rotation": {"description": "The rotation required to match a right-handed image coordinate system to the coordinate system of the stage in radians.", "title": "Rotation", "type": "number"}}, "required": ["nm_per_px", "rotation"], "title": "_Resolution", "type": "object"}}, "additionalProperties": false, "description": "This message contains the resolutions of all the calibrated magnifications of the microscope.", "properties": {"lowmag": {"additionalProperties": {"$ref": "#/$defs/_Resolution"}, "description": "A mapping of calibrated low-mag magnifications to thier calibration values.", "title": "Lowmag", "type": "object"}, "mag": {"additionalProperties": {"$ref": "#/$defs/_Resolution"}, "description": "A mapping of calibrated high-mag magnifications to their calibration values.", "title": "Mag", "type": "object"}}, "required": ["lowmag", "mag"], "title": "Resolution", "type": "object"}, "calibration.centroid": {"additionalProperties": false, "description": "This message contains the location of the centroid of the specified aperture.", "properties": {"aperture_id": {"description": "The ID of the aperture that this centroid pertains to.", "title": "Aperture Id", "type": "integer"}, "x": {"description": "The stage coordinate system X axis location of the centroid.", "title": "X", "type": "integer"}, "y": {"description": "The stage coordinate system Y axis location of the centroid.", "title": "Y", "type": "integer"}}, "required": ["aperture_id", "x", "y"], "title": "Centroid", "type": "object"}, "state.current": {"additionalProperties": false, "description": "This message contains the current state of the orchastration state machine.", "properties": {"state": {"description": "The current state of the orchastration state machine.", "title": "State", "type": "string"}}, "required": ["state"], "title": "Current", "type": "object"}, "state.change": {"additionalProperties": false, "description": "This message is sent on a state change of the orchastration state machine.", "properties": {"old": {"description": "The previous state of the orchastration state machine.", "title": "Old", "type": "string"}, "new": {"description": "The new state of the orchastration state machine.", "title": "New", "type": "string"}}, "required": ["old", "new"], "title": "Change", "type": "object"}, "lens_correction.transform": {"additionalProperties": false, "description": "This message contains a compact representation of the generated lens correction transform.", "properties": {"transform": {"description": "The base64 encoded lens correction transform.", "title": "Transform", "type": "string"}}, "required": ["transform"], "title": "Transform", "type": "object"}}}